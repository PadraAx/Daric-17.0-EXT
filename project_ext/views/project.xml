<odoo>
  <data>
    <record id="view_project_form_ext" model="ir.ui.view">
        <field name="name">project.project.form.ext</field>
        <field name="model">project.project</field>
        <field name="inherit_id" ref="project.edit_project"></field>
        <field name="arch" type="xml">
            <field name="user_id" position="after">
              <field name="project_deputy_ids" class="o_task_user_field" widget="many2many_avatar_user"/>
              <!-- <field name="type_ids" widget="many2many_tags"/> -->
            </field>
            <xpath expr="//page[@name='settings']/group/group[1]" position="attributes">
              <attribute name="invisible">1</attribute>
            </xpath>
            <field name="partner_id" position="attributes">
              <attribute name="invisible">1</attribute>
            </field>
            <xpath expr="//page[@name='settings']/group[1]" position="before">
                <group>
                    <group>
                        <field name="tag_required"/>
                    </group>
                </group>
            </xpath>
            <xpath expr="//page[@name='description']" position="before">
              <page string="Task Members" name="task_members" autofocus="autofocus">
                    
                    <field name="task_member_ids" mode="kanban" context="{'project_id':active_id}">
                        <kanban class="o_kanban_mobile">
                            <field name="id"/>
                            <field name="name"/>
                            <field name="login"/>
                            <field name="lang"/>
                            <field name="active"/>
                            <field name="login_date"/>
                            <field name="can_remove_members" invisible="1"/>
                            <templates>
                                <t t-name="kanban-box">
                                    <div t-attf-class="oe_kanban_card">
                                        <div class="o_kanban_image">
                                            <img alt="Avatar" t-att-src="kanban_image('res.users', 'avatar_128', record.id.raw_value)"/>
                                        </div>
                                        <div class="oe_kanban_details">
                                            <ul>
                                                <li class="text-success float-end mb4" t-if="record.active.raw_value"><i class="fa fa-circle" role="img" aria-label="Ok" title="Ok"/></li>
                                                <li class="text-danger float-end mb4" t-if="!record.active.raw_value"><i class="fa fa-circle" role="img" aria-label="Invalid" title="Invalid"/></li>
                                                <li class="mb4">
                                                    <strong><field name="name"/></strong>
                                                </li>
                                                <li class="badge rounded-pill float-end mb4" t-if="record.lang.raw_value"><field name="lang"/></li>
                                                <li class="mb4" t-if="record.login.raw_value" title="Login"><i class="fa fa-envelope" role="img" aria-label="Login"/> <field name="login"/></li>
                                                <button name="remove_task_member" string="Remove" style="color:#fb7171"  class="btn-secondary" type="object" invisible="not can_remove_members"/>
                                            </ul>
                                        </div>
                                    </div>
                                </t>
                            </templates>
                        </kanban>
                    </field>
                </page>
            </xpath>
        </field>
    </record>


    <!-- <record id="project_project_view_form_simplified_task_stages" model="ir.ui.view">
        <field name="name">project.project.view.form.simplified.task.stages</field>
        <field name="model">project.project</field>
        <field name="inherit_id" ref="project.project_project_view_form_simplified_footer"/>
        <field name="mode">extension</field>
        <field name="arch" type="xml">
            <xpath expr="//footer" position="replace">
                    
                    <div class="oe_title">
                        <label for="type_ids" string="Task Stages"/>
                        <h5>
                            <field name="type_ids" widget="many2many_tags"/>
                        </h5>
                    </div>
                    <footer>
                        <button string="Create project" name="action_view_tasks" type="object" class="btn-primary o_open_tasks" data-hotkey="q"/>
                        <button string="Discard" class="btn-secondary" special="cancel" data-hotkey="z"/>
                    </footer>
            </xpath>
        </field>
    </record> -->
    
    <record id="quick_create_task_form_inh" model="ir.ui.view">
            <field name="name">project.task.form.quick_create.inh</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.quick_create_task_form"></field>
            <field name="arch" type="xml">
                <field name="project_id" position="replace">
                    <field name="project_id" readonly="1" widget="project_private_task" invisible="context.get('default_project_id', False)" placeholder="Private" class="o_project_task_project_field"/>
                    <field name="project_tag_required" invisible="1"/>
                    <field name="tag_ids" widget="many2many_tags" invisible="not project_tag_required" required="project_tag_required" options="{'color_field': 'color'}"/>
                </field>
                
                <field name="user_ids" position="replace">
                  <field name="task_member_ids" invisible="1"/>
                  <field name="user_ids" options="{'no_open': True, 'no_quick_create': True}" domain="[('share', '=', False), ('active', '=', True), ('id', 'in', task_member_ids)]"
                              widget="many2many_avatar_user"/>
                </field>

                <!-- <field name="partner_id" position="attributes">
                  <attribute name="invisible">1</attribute>
                </field> -->
            </field>
        </record>
        




        <record id="inherit_view_project_kanban" model="ir.ui.view">
          <field name="name">inherit.project.project.kanban</field>
          <field name="model">project.project</field>
          <field name="inherit_id" ref="project.view_project_kanban" />
          <field name="arch" type="xml">
              <xpath expr="//kanban" position="attributes">
                      <attribute name="group_create">0</attribute>
                      <attribute name="group_delete">0</attribute>
                      <attribute name="group_edit">0</attribute>
                      <!-- <attribute name="archivable">0</attribute> -->
                      <attribute name="quick_create">1</attribute>
              </xpath>
              <xpath expr="//div[hasclass('o_kanban_card_manage_settings', 'row')]" position="replace">
                <div class="o_kanban_card_manage_settings row">
                    <div role="menuitem" aria-haspopup="true" class="col-6" groups="project.group_project_manager,project_ext.group_project_owner">
                        <ul class="oe_kanban_colorpicker" data-field="color" role="popup"/>
                    </div>
                    <div role="menuitem" class="col-6" groups="project.group_project_manager,project_ext.group_project_owner">
                        <a t-if="record.privacy_visibility.raw_value == 'portal'" class="dropdown-item" role="menuitem" name="181" type="action">Share</a>
                        <a class="dropdown-item" role="menuitem" type="edit">Settings</a>
                    </div>
                    <div class="o_kanban_card_manage_section o_kanban_manage_view col-12 row ps-0" groups="!project.group_project_manager,!project_ext.group_project_owner">
                        <div role="menuitem" class="w-100">
                            <a class="dropdown-item mx-0" role="menuitem" type="open">View</a>
                        </div>
                    </div>
                </div>
              </xpath>
          </field>
      </record>

    
      <record model="ir.ui.view" id="view_task_form2_inh">
                <field name="name">project.task.form.inh</field>
                <field name="model">project.task</field>
                <field name="inherit_id" ref="project.view_task_form2" />
                <field name="arch" type="xml">
                  <field name="project_id" position="replace">
                    <field name="project_id" placeholder="Private" readonly="1" domain="[('active', '=', True), ('company_id', '=', company_id)]" invisible="parent_id != False" widget="project_private_task"/>
                  </field>

                  <field name="partner_id" position="attributes">
                    <attribute name="invisible">1</attribute>
                  </field>
                </field>
      </record>



        <record id="action_subordinate_task_management" model="ir.actions.act_window">
            <field name="name">Subordinate Tasks</field>
            <field name="res_model">project.task</field>
            <field name="view_mode">kanban,tree,form,calendar,pivot,graph,activity</field>
            <field name="context">{}</field>
            <field name="domain">['|',('project_id.user_id', '=', uid), ('project_id.project_deputy_ids.id', 'in', [uid])]</field>
            <field name="search_view_id" ref="project.view_task_search_form"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No tasks found. Let's create one!
                </p>
                <p>
                    Organize your tasks by dispatching them across the pipeline.<br/>
                    Collaborate efficiently by chatting in real-time or via email.
                </p>
            </field>
        </record>



        <menuitem name="Subordinate Tasks" id="menu_subordinate_tasks" parent="project.menu_main_pm"
            action="action_subordinate_task_management" sequence="2" groups="project.group_project_user"/>
  </data>

  
</odoo>