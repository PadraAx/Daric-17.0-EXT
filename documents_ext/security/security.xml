<odoo>
    <data noupdate="0">
        <record id="group_documents_workspace_administrator" model="res.groups">
            <field name="name">Workspace Administrator</field>
            <field name="implied_ids" eval="[(4, ref('documents.group_documents_user'))]"/>
            <field name="category_id" ref="base.module_category_productivity_documents"/>
        </record>

        <record id="documents_folder_administrator_rule" model="ir.rule">
            <field name="name">Documents.folder: Administrator rule</field>
            <field name="model_id" ref="model_documents_folder"/>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field name="domain_force">[ 
                '|',
                     ('parent_folder_id.workspace_administrator_ids','in',user.id),
                     ('workspace_administrator_ids','in',user.id)]
            </field>
      
        </record> 

    <record id="documents.documents_folder_groups_rule" model="ir.rule">
        <field name="groups" eval="[(4, ref('documents.group_documents_user'))]"/>
        <field name="domain_force">[
                '|','|', '|','|',
                            '&amp;',
                                 ('write_users','=',False),
                                 '&amp;',
                                   ('read_users','=',False),
                                    '&amp;',
                                        ('read_group_ids', '=', False),
                                        ('group_ids', '=', False),
                ('group_ids', 'in', [g.id for g in user.groups_id]),
                ('read_group_ids', 'in', [g.id for g in user.groups_id]),          
                ('read_users','in',[user.id]),
                ('write_users','in',[user.id]), 
                ]</field>
                <field name="perm_read" eval="True" />
                <field name="perm_write" eval="False" />
                <field name="perm_create" eval="False" />
                <field name="perm_unlink" eval="False" />
        </record>
       
        <record id="documents.documents_document_readonly_rule" model="ir.rule">
            <field name="groups" eval="[(4, ref('documents.group_documents_user'))]"/>
            <field name="domain_force">[
                '&amp;',
                         '|',
                            ('folder_id.read_group_ids', 'in', [g.id for g in user.groups_id]),
                            ('folder_id.read_users','in',[user.id]),
                         '|',
                            ('folder_id.user_specific', '=', False),
                            ('owner_id', '=', user.id)
                ]</field>
           
        </record>
    
        <record id="documents.documents_document_write_rule" model="ir.rule">
            <field name="groups" eval="[(4, ref('documents_ext.group_documents_workspace_administrator'))]"/>
            <field name="domain_force">[
                 '|',
                 '&amp;',
                          '|',
                                ('folder_id.group_ids', 'in', [g.id for g in user.groups_id]),
                                ('folder_id.write_users','in',[user.id]),
                                    '|',
                                        ('folder_id.user_specific_write', '=', False),
                                        ('owner_id', '=', user.id),
                        '&amp;',
                            ('folder_id.write_users','=',False),
                                '&amp;',
                                    ('folder_id.read_users','=',False),    
                                        '&amp;',
                                            ('folder_id.read_group_ids', '=', False),
                                            ('folder_id.group_ids', '=', False)]
                    
                    </field>
           
        </record>
    </data>
</odoo>