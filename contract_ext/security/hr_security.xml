<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="base.module_category_human_resources_contracts" model="ir.module.category">
        <field name="sequence">10</field>
    </record>

    <record id="group_hr_contract_reader" model="res.groups">
        <field name="name">Reader: Can read all contract forms</field>
        <field name="category_id" ref="base.module_category_human_resources_contracts"/>
        <field name="implied_ids" eval="[(6, 0, [ref('base.group_user')])]"/>
        <field name="comment">The user can only read contract forms.</field>
    </record>

    <data noupdate="0">
        <record id="hr_contract.group_hr_contract_employee_manager" model="res.groups">
            <field name="implied_ids" eval="[(4, ref('contract_ext.group_hr_contract_reader'))]"/>
            <field name="name">HRSS-Contract Manager</field>
        </record>
    </data>

    <!-- Rules -->
    <!-- employee -->
    <record id="hr_employee_hrss_contract_rule" model="ir.rule">
        <field name="name">Contract HRSS can see all employees</field>
        <field name="model_id" ref="hr.model_hr_employee"/>
        <field name="groups" eval="[(4, ref('hr_contract.group_hr_contract_employee_manager'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_unlink" eval="0"/>
        <field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
    </record>

    <!-- contract -->
    <record id="hr_business_partner_contract_read_rule" model="ir.rule">
        <field name="name">HRBP can only read own department records</field>
        <field name="model_id" ref="hr_contract.model_hr_contract"/>
        <field name="groups" eval="[(4, ref('employee_ext.group_hr_business_partner'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_unlink" eval="0"/>
        <field name="domain_force">['|', '|', ('employee_id.department_id.hrbp_id', '=', user.employee_id.id),
                                                ('employee_id.department_id.hrbp_associate_ids', 'in', user.employee_id.ids),
                                                ('id', '=', user.employee_id.id)]</field>
    </record>

    <record id="hr_contract_user_read_rule" model="ir.rule">
        <field name="name">Users can read their own contract</field>
        <field name="model_id" ref="hr_contract.model_hr_contract"/>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_unlink" eval="0"/>
        <field name="domain_force">[('employee_id', '=', user.employee_id.id)]</field>
    </record>

    <record id="hr_contract_reader_read_rule" model="ir.rule">
        <field name="name">Readers can read all contract</field>
        <field name="model_id" ref="hr_contract.model_hr_contract"/>
        <field name="groups" eval="[(4, ref('contract_ext.group_hr_contract_reader'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_unlink" eval="0"/>
        <field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
    </record>

    <record id="hr_contract_officer_hrss_rule" model="ir.rule">
        <field name="name">HR Contract HRSS Rule</field>
        <field name="model_id" ref="hr_contract.model_hr_contract"/>
        <field name="groups" eval="[(4, ref('hr_contract.group_hr_contract_employee_manager'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="0"/>
        <field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
    </record>

</odoo>