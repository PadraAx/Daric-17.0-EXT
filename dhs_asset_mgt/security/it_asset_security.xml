<?xml version="1.0"  encoding="utf-8"?>
<odoo>
    <record model="ir.module.category" id="dhs_asset_mgt.it_asset"> 
        <field name="name">IT Asset</field>
        <field name="description">It will give you IT asset rights</field>
    </record>

    <!-- *********************************** -->
    <!-- ********* GROUPS ****************** -->
    <!-- *********************************** -->

    <record id="group_it_asset_user" model="res.groups">
        <field name="name">User</field>
        <field name="category_id" ref="dhs_asset_mgt.it_asset"/> 
        <!-- <field name="users" eval="[(4, ref('base.user_root'))]"/> -->
    </record>

    <record id="group_it_asset_officer" model="res.groups">
        <field name="name">Officer</field>
        <field name="category_id" ref="dhs_asset_mgt.it_asset"/> 
         <field name="implied_ids" eval="[(4, ref('dhs_asset_mgt.group_it_asset_user'))]" />
    </record>
    
    <record id="group_it_asset_admin" model="res.groups">
        <field name="name">Admin</field>
        <field name="category_id" ref="dhs_asset_mgt.it_asset"/> 
        <field name="implied_ids" eval="[(4, ref('dhs_asset_mgt.group_it_asset_officer'))]" />
        <field name="users" eval="[(4, ref('base.user_root')), (4, ref('base.user_admin'))]"/>
    </record>


    <data noupdate="0">
        <record id="base.default_user" model="res.users">
            <field name="groups_id" eval="[(4,ref('dhs_asset_mgt.group_it_asset_user'))]"/>
        </record>
    </data> 

    <!-- *********************************** -->
    <!-- ********* RULES ******************* -->
    <!-- *********************************** -->

    <data noupdate="0">
        <!-- RULES (user) -->
            <!-- request -->
            <record id="asset_user_asset_component_rule" model="ir.rule">
                <field name="name">Users can only access their own Request</field>
                <field name="model_id" ref="model_asset_component"/>
                <field name="groups" eval="[(4, ref('group_it_asset_user')), (4, ref('group_it_asset_officer'))]"/>
                <field name="domain_force">['|', ('location_id.user_ids', 'in', [user.id]), ('using_user', '=', user.partner_id.id)]</field>
            </record> 
            <record id="asset_user_material_request_rule" model="ir.rule">
                <field name="name">Users can only access their own Request</field>
                <field name="model_id" ref="model_material_request"/>
                <field name="groups" eval="[(4, ref('group_it_asset_user')), (4, ref('group_it_asset_officer'))]"/>
                <field name="domain_force">['|', ('location_id.user_ids', 'in', [user.id]), ('using_user', '=', user.partner_id.id)]</field>
            </record> 

            <record id="asset_admin_asset_component_rule" model="ir.rule">
                <field name="name">Admin can only access their own Request</field>
                <field name="model_id" ref="model_asset_component"/>
                <field name="groups" eval="[(4, ref('group_it_asset_admin'))]"/>
                <field name="domain_force">[(1, '=', 1)]</field>
            </record> 
            <record id="asset_admin_material_request_rule" model="ir.rule">
                <field name="name">Admin can only access their own Request</field>
                <field name="model_id" ref="model_material_request"/>
                <field name="groups" eval="[(4, ref('group_it_asset_admin'))]"/>
                <field name="domain_force">[(1, '=', 1)]</field>
            </record> 

<!-- 
            <record id="asset_user_asset_stock_location_rule" model="ir.rule">
                <field name="name">Users can only access their own location</field>
                <field name="model_id" ref="stock.model_stock_location"/>
                <field name="groups" eval="[(4, ref('group_it_asset_user')), (4, ref('group_it_asset_officer'))]"/>
                <field name="domain_force"> [('location_id.user_ids', 'in', [user.id])]</field>
            </record> 
            <record id="asset_admin_asset_stock_location_rule" model="ir.rule">
                <field name="name">Admin can access to all location</field>
                <field name="model_id" ref="stock.model_stock_location"/>
                <field name="groups" eval="[(4, ref('group_it_asset_admin'))]"/>
                <field name="domain_force">[(1, '=', 1)]</field>
            </record>  -->

    </data>


</odoo>
